#VRML_SIM R2023b utf8
# license: Copyright Cyberbotics Ltd. Licensed for use only with Webots.
# license: https://cyberbotics.com/webots_assets_license
# A traffic light with LED nodes for intersection control.

PROTO TrafficLight [
  field SFVec3f    translation     0 0 0
  field SFRotation rotation        0 0 1 0
  field SFFloat    height          4
  field SFColor    poleColor       0.7 0.7 0.7
  field SFBool     redOn           TRUE
  field SFBool     yellowOn        FALSE
  field SFBool     greenOn         FALSE
]
{
  Transform {
    translation IS translation
    rotation IS rotation
    children [
      # Traffic light pole
      DEF POLE Shape {
        appearance PBRAppearance {
          baseColor IS poleColor
          metalness 0.8
          roughness 0.3
        }
        geometry Cylinder {
          height IS height
          radius 0.1
        }
      }
      # Traffic light housing
      DEF HOUSING Transform {
        translation 0 0 2.5
        children [
          Shape {
            appearance PBRAppearance {
              baseColor 0.2 0.2 0.2
              metalness 0.6
              roughness 0.4
            }
            geometry Box {
              size 0.6 0.3 1.2
            }
          }
        ]
      }
      # Red light
      DEF RED_LIGHT Transform {
        translation 0 0.16 2.9
        children [
          Shape {
            appearance PBRAppearance {
              baseColor 0.1 0.1 0.1
              metalness 0.2
              roughness 0.8
            }
            geometry Cylinder {
              height 0.05
              radius 0.15
            }
          }
          LED {
            color [ 1 0 0 ]
            on IS redOn
            children [
              DEF RED_BULB Shape {
                appearance PBRAppearance {
                  baseColor 1 0 0
                  emissiveColor 0.8 0 0
                  metalness 0
                  roughness 0.1
                }
                geometry Sphere {
                  radius 0.12
                }
              }
            ]
          }
        ]
      }
      # Yellow light
      DEF YELLOW_LIGHT Transform {
        translation 0 0.16 2.5
        children [
          Shape {
            appearance PBRAppearance {
              baseColor 0.1 0.1 0.1
              metalness 0.2
              roughness 0.8
            }
            geometry Cylinder {
              height 0.05
              radius 0.15
            }
          }
          LED {
            color [ 1 1 0 ]
            on IS yellowOn
            children [
              DEF YELLOW_BULB Shape {
                appearance PBRAppearance {
                  baseColor 1 1 0
                  emissiveColor 0.8 0.8 0
                  metalness 0
                  roughness 0.1
                }
                geometry Sphere {
                  radius 0.12
                }
              }
            ]
          }
        ]
      }
      # Green light
      DEF GREEN_LIGHT Transform {
        translation 0 0.16 2.1
        children [
          Shape {
            appearance PBRAppearance {
              baseColor 0.1 0.1 0.1
              metalness 0.2
              roughness 0.8
            }
            geometry Cylinder {
              height 0.05
              radius 0.15
            }
          }
          LED {
            color [ 0 1 0 ]
            on IS greenOn
            children [
              DEF GREEN_BULB Shape {
                appearance PBRAppearance {
                  baseColor 0 1 0
                  emissiveColor 0 0.8 0
                  metalness 0
                  roughness 0.1
                }
                geometry Sphere {
                  radius 0.12
                }
              }
            ]
          }
        ]
      }
      # Base foundation
      DEF BASE Transform {
        translation 0 0 -0.1
        children [
          Shape {
            appearance PBRAppearance {
              baseColor 0.4 0.4 0.4
              roughness 0.8
              metalness 0.1
            }
            geometry Cylinder {
              height 0.2
              radius 0.3
            }
          }
        ]
      }
    ]
  }
}