#VRML_SIM R2023b utf8
PROTO TrafficLight [
  field SFVec3f    translation  0 0 0
  field SFRotation rotation     0 0 1 0
  field SFString   name         "TrafficLight"
  field SFBool     redOn        TRUE
  field SFBool     yellowOn     FALSE
  field SFBool     greenOn      FALSE
]
{
  Group {
    children [
      # Traffic Light Pole
      DEF POLE Transform {
        translation IS translation
        rotation IS rotation
        children [
          Shape {
            appearance PBRAppearance {
              baseColor 0.3 0.3 0.3
              roughness 0.8
              metalness 0.5
            }
            geometry Cylinder {
              height 4
              radius 0.15
            }
          }
        ]
      }
      
      # Traffic Light Housing
      DEF HOUSING Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 0 3.5
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.2 0.2 0.2
                  roughness 0.7
                  metalness 0.8
                }
                geometry Box {
                  size 0.8 0.3 1.8
                }
              }
            ]
          }
        ]
      }
      
      # Red Light
      DEF RED_LIGHT Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.16 4.1
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 1 0 0
                  emissiveColor 0.8 0 0
                  roughness 0.1
                  metalness 0.0
                }
                geometry Sphere {
                  radius 0.15
                }
              }
            ]
          }
          # Red LED Light Source
          Transform {
            translation 0 -0.2 4.1
            children [
              DEF RED_LED LED {
                on IS redOn
                color [
                  1 0 0
                ]
              }
            ]
          }
        ]
      }
      
      # Yellow Light
      DEF YELLOW_LIGHT Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.16 3.5
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 1 1 0
                  emissiveColor 0.6 0.6 0
                  roughness 0.1
                  metalness 0.0
                }
                geometry Sphere {
                  radius 0.15
                }
              }
            ]
          }
          # Yellow LED Light Source
          Transform {
            translation 0 -0.2 3.5
            children [
              DEF YELLOW_LED LED {
                on IS yellowOn
                color [
                  1 1 0
                ]
              }
            ]
          }
        ]
      }
      
      # Green Light
      DEF GREEN_LIGHT Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.16 2.9
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0 1 0
                  emissiveColor 0 0.8 0
                  roughness 0.1
                  metalness 0.0
                }
                geometry Sphere {
                  radius 0.15
                }
              }
            ]
          }
          # Green LED Light Source
          Transform {
            translation 0 -0.2 2.9
            children [
              DEF GREEN_LED LED {
                on IS greenOn
                color [
                  0 1 0
                ]
              }
            ]
          }
        ]
      }
      
      # Traffic Light Hood/Shade
      DEF HOOD_RED Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.25 4.25
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.1 0.1 0.1
                  roughness 0.9
                  metalness 0.1
                }
                geometry Cylinder {
                  height 0.05
                  radius 0.2
                }
              }
            ]
          }
        ]
      }
      
      DEF HOOD_YELLOW Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.25 3.65
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.1 0.1 0.1
                  roughness 0.9
                  metalness 0.1
                }
                geometry Cylinder {
                  height 0.05
                  radius 0.2
                }
              }
            ]
          }
        ]
      }
      
      DEF HOOD_GREEN Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.25 3.05
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.1 0.1 0.1
                  roughness 0.9
                  metalness 0.1
                }
                geometry Cylinder {
                  height 0.05
                  radius 0.2
                }
              }
            ]
          }
        ]
      }
      
      # Base Platform
      DEF BASE Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 0 -0.05
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.4 0.4 0.4
                  roughness 0.8
                  metalness 0.3
                }
                geometry Cylinder {
                  height 0.1
                  radius 0.5
                }
              }
            ]
          }
        ]
      }
      
      # Mounting Arm
      DEF ARM Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0 -0.6 3.5
            rotation 1 0 0 1.5708
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.3 0.3 0.3
                  roughness 0.8
                  metalness 0.5
                }
                geometry Cylinder {
                  height 1.2
                  radius 0.08
                }
              }
            ]
          }
        ]
      }
      
      # Support Cables (Aesthetic)
      DEF CABLE_1 Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation 0.1 -0.3 2.5
            rotation 1 0 0 0.3
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.1 0.1 0.1
                  roughness 0.9
                  metalness 0.8
                }
                geometry Cylinder {
                  height 2.2
                  radius 0.02
                }
              }
            ]
          }
        ]
      }
      
      DEF CABLE_2 Transform {
        translation IS translation
        rotation IS rotation
        children [
          Transform {
            translation -0.1 -0.3 2.5
            rotation 1 0 0 -0.3
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.1 0.1 0.1
                  roughness 0.9
                  metalness 0.8
                }
                geometry Cylinder {
                  height 2.2
                  radius 0.02
                }
              }
            ]
          }
        ]
      }
    ]
  }
}